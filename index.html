<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>YouTube Multiplayer</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:"Inter","Segoe UI",Roboto,sans-serif;
  background:#000;
  color:#eee;
  min-height:100vh;
  display:flex;
  flex-direction:column;
}

/* -------- Header -------- */
header{
  background:#111;
  border-bottom:1px solid #222;
  padding:.8rem 1rem;
  display:flex;
  flex-wrap:wrap;
  gap:.5rem;
  align-items:center;
  justify-content:space-between;
}
header h1{font-size:1.1rem;font-weight:500;color:#ddd}
.controls{display:flex;gap:.5rem;align-items:center;flex-wrap:wrap}
input[type=text]{
  background:#161616;border:1px solid #333;color:#f0f0f0;
  border-radius:4px;padding:.45rem .7rem;width:240px
}
input[type=text]:focus{border-color:#666;outline:none}
button{
  background:#222;color:#eee;border:none;border-radius:4px;
  padding:.5rem 1rem;cursor:pointer;font-weight:500;
  transition:background-color .2s;
}
button:hover{background:#333}
.range-wrap{display:flex;align-items:center;gap:.4rem;color:#aaa;font-size:.85rem}
input[type=range]{accent-color:#555;width:120px;cursor:pointer}

/* -------- Grid Layout -------- */
main{flex:1;width:100%}
.video-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(var(--vidWidth,25vw),1fr));
  gap:0;
  width:100%;
  transition:all .3s ease;
}
.video-container{
  position:relative;
  overflow:hidden;
  background:#080808;
  border:1px solid #111;
  height:calc(50vh - 1px);
  transition:background-color .2s ease,border-color .2s ease,transform .2s ease;
}
.video-container.dragging{opacity:.6;transform:scale(.98)}
.video-container.drop-target{background:#1a1a1a;border-color:#333}

/* -------- Frame Full-Bleed -------- */
.video-wrapper{
  position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;
}
.video-wrapper iframe{
  position:absolute;
  top:50%;left:50%;
  width:112%;height:112%;          /* extra coverage to eliminate bars */
  transform:translate(-50%,-50%);
  border:none;
  transition:opacity .4s ease;
}

/* -------- Buttons -------- */
.action{
  position:absolute;top:10px;width:30px;height:30px;
  background:rgba(0,0,0,0.6);
  display:flex;align-items:center;justify-content:center;
  border-radius:4px;
  opacity:0;transition:opacity .2s;
  z-index:2;
}
.video-container:hover .action{opacity:1}
.action.move{left:10px;cursor:grab}
.action.remove{right:10px;cursor:pointer}
.action svg{width:18px;height:18px;fill:#f5f5f5}

/* -------- Placeholder -------- */
.placeholder{text-align:center;padding:2rem;color:#666;font-style:italic}

@media(max-width:800px){.video-container{height:33vh}}
@media(max-width:600px){
  header{flex-direction:column;align-items:flex-start}
  .controls{width:100%}
  input[type=text]{width:100%}
  .video-container{height:45vh}
}
</style>
</head>
<body>
<header>
  <h1>YouTube Multiplayer</h1>
  <div class="controls">
    <input id="videoUrl" type="text" placeholder="Paste YouTube URL">
    <button id="addBtn">Add</button>
    <div class="range-wrap">
      Zoom: <input id="sizeRange" type="range" min="20" max="50" value="25">
    </div>
  </div>
</header>

<main>
  <div id="videoGrid" class="video-grid"></div>
  <div id="placeholder" class="placeholder">No videos yet â€” paste a URL above.</div>
</main>

<script>
const grid=document.getElementById("videoGrid");
const addBtn=document.getElementById("addBtn");
const videoUrl=document.getElementById("videoUrl");
const sizeRange=document.getElementById("sizeRange");
const placeholder=document.getElementById("placeholder");
let videos=[];

/* -------- utilities -------- */
function extractVideoId(url){
  const r=/(?:v=|\/)([0-9A-Za-z_-]{11})(?:[?&]|$)/;
  const m=url.match(r);
  return m?m[1]:null;
}
function save(){localStorage.setItem("yt_smooth_videos",JSON.stringify(videos));}
function load(){const s=localStorage.getItem("yt_smooth_videos");if(s)videos=JSON.parse(s);}
function showPlaceholder(){placeholder.style.display=videos.length?"none":"block";}

/* -------- create a box -------- */
function makeBox(id,index){
  const box=document.createElement("div");box.className="video-container";box.dataset.index=index;
  const wrap=document.createElement("div");wrap.className="video-wrapper";
  const iframe=document.createElement("iframe");
  iframe.src=`https://www.youtube.com/embed/${id}`;iframe.allowFullscreen=true;
  wrap.appendChild(iframe);

  const mv=document.createElement("div");
  mv.className="action move";
  mv.innerHTML=`<svg viewBox='0 0 24 24'><path d='M7 10h2v4H7v-4zm4 0h2v4h-2v-4zm4 0h2v4h-2v-4z'/></svg>`;

  const rm=document.createElement("div");
  rm.className="action remove";
  rm.innerHTML=`<svg viewBox='0 0 24 24'><path d='M18 6L6 18M6 6l12 12' stroke='#f5f5f5' stroke-width='2' stroke-linecap='round'/></svg>`;
  rm.addEventListener("click",()=>{videos.splice(index,1);save();box.remove();reindex();showPlaceholder();});

  box.appendChild(mv);box.appendChild(rm);box.appendChild(wrap);

  /* drag events without reloading iframes */
  box.addEventListener("dragstart",e=>{
    box.classList.add("dragging");
    e.dataTransfer.effectAllowed="move";
    e.dataTransfer.setData("text/plain",index);
  });
  box.addEventListener("dragend",()=>box.classList.remove("dragging"));
  box.addEventListener("dragover",e=>{
    e.preventDefault();
    if(!box.classList.contains("dragging"))box.classList.add("drop-target");
  });
  box.addEventListener("dragleave",()=>box.classList.remove("drop-target"));
  box.addEventListener("drop",e=>{
    e.preventDefault();
    document.querySelectorAll(".drop-target").forEach(el=>el.classList.remove("drop-target"));
    const from=parseInt(e.dataTransfer.getData("text/plain"));
    const to=index;
    if(from===to)return;
    const moved=videos.splice(from,1)[0];
    videos.splice(to,0,moved);
    save();
    reorderDom();reindex();
  });

  return box;
}

/* keep index markers synced */
function reindex(){
  [...grid.children].forEach((el,i)=>el.dataset.index=i);
}

/* reorder DOM elements without reloading iframes */
function reorderDom(){
  videos.forEach((id,i)=>{
    const box=[...grid.children].find(b=>b.querySelector("iframe").src.includes(id));
    if(box)grid.appendChild(box);
  });
}

/* initial render only once */
function renderAll(){
  grid.innerHTML="";
  videos.forEach((id,i)=>grid.appendChild(makeBox(id,i)));
  showPlaceholder();
}

/* -------- add -------- */
addBtn.addEventListener("click",()=>{
  const id=extractVideoId(videoUrl.value.trim());
  if(!id){alert("Please enter a valid YouTube URL");return;}
  videos.push(id);save();
  grid.appendChild(makeBox(id,videos.length-1));showPlaceholder();
  videoUrl.value="";
});
videoUrl.addEventListener("keypress",e=>{if(e.key==="Enter")addBtn.click();});

/* -------- zoom -------- */
sizeRange.addEventListener("input",()=>{
  const v=sizeRange.value;
  grid.style.setProperty("--vidWidth",v+"vw");
  localStorage.setItem("yt_smooth_size",v);
});
function initSize(){
  const s=localStorage.getItem("yt_smooth_size");
  const v=s||sizeRange.value;
  sizeRange.value=v;
  grid.style.setProperty("--vidWidth",v+"vw");
}

/* -------- init -------- */
load();initSize();renderAll();
</script>
</body>
</html>


