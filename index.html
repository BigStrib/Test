<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>YouTube Multiplayer</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:"Inter","Segoe UI",Roboto,sans-serif;
  background:#000;
  color:#eee;
  display:flex;
  flex-direction:column;
  min-height:100vh;
}

/* Header */
header{
  background:#111;
  border-bottom:1px solid #222;
  padding:0.8rem 1rem;
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  justify-content:space-between;
  gap:0.5rem;
}
header h1{font-size:1.1rem;font-weight:500;color:#e0e0e0}
.controls{display:flex;flex-wrap:wrap;gap:0.5rem;align-items:center}
input[type=text]{
  background:#161616;border:1px solid #333;color:#f5f5f5;
  border-radius:4px;padding:0.45rem 0.7rem;width:240px
}
input[type=text]:focus{border-color:#666;outline:none}
button{
  background:#222;color:#eee;border:none;border-radius:4px;
  padding:0.5rem 1rem;cursor:pointer;font-weight:500
}
button:hover{background:#333}
.range-wrap{display:flex;align-items:center;gap:0.4rem;color:#aaa;font-size:0.85rem}
input[type=range]{accent-color:#555;cursor:pointer;width:120px}

/* Grid */
main{flex:1;width:100%}
.video-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(var(--vidWidth,300px),1fr));
  gap:0;
  width:100%;
}
.video-container{
  position:relative;
  overflow:hidden;
  background:#080808;
  border:1px solid #111;
}
iframe{
  width:100%;
  height:auto;
  display:block;
  aspect-ratio:16/9;
  border:none;
}

/* Buttons */
.action{
  position:absolute;top:10px;width:30px;height:30px;
  background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;
  border-radius:4px;opacity:0;transition:opacity .2s;
}
.video-container:hover .action{opacity:1}
.action.move{left:10px;cursor:grab}
.action.remove{right:10px;cursor:pointer}
.action svg{width:18px;height:18px;fill:#f5f5f5}

/* Placeholder */
.placeholder{text-align:center;padding:2rem;color:#666;font-style:italic}

@media(max-width:600px){
  header{flex-direction:column;align-items:flex-start}
  .controls{width:100%}
  input[type=text]{width:100%}
}
</style>
</head>
<body>
  <header>
    <h1>YouTube Multiplayer</h1>
    <div class="controls">
      <input id="videoUrl" type="text" placeholder="Paste YouTube URL">
      <button id="addBtn">Add</button>
      <div class="range-wrap">Zoom:
        <input id="sizeRange" type="range" min="220" max="600" value="320">
      </div>
    </div>
  </header>

  <main>
    <div id="videoGrid" class="video-grid"></div>
    <div id="placeholder" class="placeholder">No videos yet â€” paste a URL above.</div>
  </main>

<script>
const addBtn=document.getElementById("addBtn");
const videoUrl=document.getElementById("videoUrl");
const grid=document.getElementById("videoGrid");
const sizeRange=document.getElementById("sizeRange");
const placeholder=document.getElementById("placeholder");

let videos=[];

function extractVideoId(url){
  const re=/(?:v=|\/)([0-9A-Za-z_-]{11})(?:[?&]|$)/;
  const m=url.match(re);
  return m?m[1]:null;
}

function createVideoContainer(id,i){
  const c=document.createElement("div");
  c.className="video-container";
  c.draggable=true;
  c.dataset.index=i;

  const iframe=document.createElement("iframe");
  iframe.src=`https://www.youtube.com/embed/${id}`;
  iframe.allowFullscreen=true;

  const move=document.createElement("div");
  move.className="action move";
  move.innerHTML=`<svg viewBox="0 0 24 24">
    <path d="M7 10h2v4H7v-4zm4 0h2v4h-2v-4zm4 0h2v4h-2v-4z"/></svg>`;

  const x=document.createElement("div");
  x.className="action remove";
  x.innerHTML=`<svg viewBox="0 0 24 24">
    <path d="M18 6L6 18M6 6l12 12" stroke="#f5f5f5" stroke-width="2" stroke-linecap="round"/>
  </svg>`;
  x.addEventListener("click",()=>{
    videos.splice(i,1);
    save(); render();
  });

  // simple drag order change
  c.addEventListener("dragstart",e=>{
    e.dataTransfer.setData("text/plain",i);
    c.style.opacity="0.4";
  });
  c.addEventListener("dragend",()=>c.style.opacity="1");
  c.addEventListener("dragover",e=>e.preventDefault());
  c.addEventListener("drop",e=>{
    e.preventDefault();
    const from=e.dataTransfer.getData("text/plain");
    const to=i;
    const moved=videos.splice(from,1)[0];
    videos.splice(to,0,moved);
    save(); render();
  });

  c.appendChild(move);
  c.appendChild(x);
  c.appendChild(iframe);
  return c;
}

function save(){localStorage.setItem("yt_stable_videos",JSON.stringify(videos));}
function load(){
  const s=localStorage.getItem("yt_stable_videos");
  if(s) videos=JSON.parse(s);
}

function render(){
  if(videos.length===0){placeholder.style.display="block";grid.innerHTML="";return;}
  placeholder.style.display="none";

  // ensure existing DOM and new list stay synced
  grid.innerHTML="";
  videos.forEach((id,i)=>{
    const vid=createVideoContainer(id,i);
    grid.appendChild(vid);
  });
}

addBtn.addEventListener("click",()=>{
  const id=extractVideoId(videoUrl.value.trim());
  if(!id){alert("Please enter a valid YouTube URL");return;}
  videos.push(id); save();
  // Append only the new one
  const vid=createVideoContainer(id,videos.length-1);
  grid.appendChild(vid);
  placeholder.style.display="none";
  videoUrl.value="";
});

videoUrl.addEventListener("keypress",e=>{if(e.key==="Enter")addBtn.click();});

sizeRange.addEventListener("input",()=>{
  const val=sizeRange.value;
  grid.style.setProperty("--vidWidth",val+"px");
  localStorage.setItem("yt_stable_size",val);
});

function initSize(){
  const s=localStorage.getItem("yt_stable_size");
  const v=s||sizeRange.value;
  sizeRange.value=v;
  grid.style.setProperty("--vidWidth",v+"px");
}

load();initSize();render();
</script>
</body>
</html>
